<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Tree Data - Phase 2</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/logo-nav.css" rel="stylesheet">

    <!-- DataTables -->
    <link rel="stylesheet" type="text/css" href="./vendor/datatables/jquery.dataTables.css">
  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg  navbar-light bg-light fixed-top shadow p-3 mb-5 rounded">
      <div class="container">
        <a class="navbar-brand" href="#" style="position: absolute; padding-top: 0px;">
          <img src="./images/logo/PFEN_logo_100.png" alt="" style="height: parent; width: 80px;">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Partners</a>
            </li>
            <li class="nav-item dropdown active">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Project Phase
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="page_phase1_suc.html">Phase 1</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="page_phase2.html">Phase 2</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>            
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
      <h3 class="mt-5">Phase 2 Tree Species List</h3>
      <p class="lead">Below are a list of tree species for Phase 2. Click on <i>View Graph</i> to view its attributes and average height and diameter graph.</p><br><br>

      <div id="container_table">
        <table id="datatable" class="cell-border stripe hover">
          <thead>
            <th>#</th>
            <th>Species Name</th>
            <th>Data</th>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Species One</td>
              <td>View Graph</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Species Two</td>
              <td>View Graph</td>
            </tr>  
            <tr>
              <td>3</td>
              <td>Species Three</td>
              <td>View Graph</td>
            </tr>       
            <tr>
              <td>4</td>
              <td>Species Four</td>
              <td>View Graph</td>
            </tr>    
            <tr>
              <td>5</td>
              <td>Species Five</td>
              <td>View Graph</td>
            </tr>        
            <tr>
              <td>6</td>
              <td>Species Six</td>
              <td>View Graph</td>
            </tr>      
            <tr>
              <td>7</td>
              <td>Species Seven</td>
              <td>View Graph</td>
            </tr>       
            <tr>
              <td>8</td>
              <td>Species Eight</td>
              <td>View Graph</td>
            </tr>              
            <tr>
              <td>9</td>
              <td>Species Nine</td>
              <td>View Graph</td>
            </tr>             
            <tr>
              <td>10</td>
              <td>Species Ten</td>
              <td>View Graph</td>
            </tr>                            
          </tbody>
        </table>
      </div>
    </div>
    <!-- /.container -->

    <!-- graph modal -->
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="modal_graph">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">

            <!-- modal title -->
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Graph of Average Height and Diameter</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <!-- modal body -->
            <div class="modal-body">
              <canvas id="graph" width="400" height="400"></canvas>
            </div>    
            
            <!-- modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>            
          </div>
        </div>
      </div>   
    <!-- ./modal --> 

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- ChartJS -->
    <script type="text/javascript" charset="utf8" src="./vendor/chartjs/Chart.bundle.min.js"></script>   

    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="./vendor/datatables/jquery.dataTables.js"></script>   
    <script type="text/javascript">
      $(document).ready( function () {
        // Initialize data tables
        var table = $('#datatable').DataTable({
            initComplete: function(settings, json){
                console.log('loaded!')
                $("#container_table").css('display', 'block');
            }
        });
        $('#datatable tbody').on('click', 'tr', function () {
          $('#modal_graph').modal();
          var data = table.row( this ).data();
          console.log( 'You clicked on '+data[0]+'\'s row' );
          window.location = 'page_species.html';
        });          

        // Initialize graph
        var ctx = document.getElementById("graph").getContext('2d');
        var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
              labels: ["2017", "2018"],
              datasets: [{
                label: 'Height',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255,99,132,1)',
                borderWidth: 1,
                data: [
                  1.5, 
                  3.4
                ]
              }, {
                label: 'Diameter',
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1,
                data: [
                  5.6,
                  7.9
                ]
            }]
          },
          options: {
              scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero:true
                      }
                  }]
              }
          }
      });        

      });      
    </script>
  </body>

</html>
